var path = require('path');
var through = require('through');
function stripBOM(content) {
  // Remove byte order marker. This catches EF BB BF (the UTF-8 BOM)
  // because the buffer-to-string conversion in `fs.readFileSync()`
  // translates it to FEFF, the UTF-16 BOM.
  if (content.charCodeAt(0) === 0xFEFF) {
    content = content.slice(1);
  }
  return content;
}
module.exports = function(file) {
  if (!file.slice(-3) === '.js') {
    return through();
  }
  var data = '';
  return through(write, end);

  function write (buf) { data += buf }
  function end () {
    this.queue('require.extensions = _require.extensions; process = _process\n')
    this.queue(stripBOM(data));
    this.queue(null);
  }
};
